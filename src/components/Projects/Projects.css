/* =========================
   Section Projets — SaaS
   ========================= */

/* Variables utiles globales (si absentes) */
:root{
  --bg: #f8fafc;
  --surface: #ffffff;
  --text: #0e1116;
  --accent: #7c6cf6; /* Ajuste à ta palette */
  --border: #e5e7eb;
  --shadow: 0 6px 16px rgba(0,0,0,.06);

  --hover-bg: rgba(0,0,0,.03);
  --chip-bg: rgba(0,0,0,.04);
  --chip-border: var(--border);

  /* Hauteur de navbar / offset sticky configurable */
  --sticky-offset: 64px;
}
[data-theme="dark"]{
  --bg: #0b1220;
  --surface: #0f172a;
  --text: #f8fafc;
  --border: #1f2a3b;
  --shadow: 0 10px 22px rgba(0,0,0,.35);

  --hover-bg: rgba(255,255,255,.06);
  --chip-bg: rgba(255,255,255,.06);
  --chip-border: #2a3644;
}

#projects{
  padding: 60px 0;
  background: var(--bg);
  color: var(--text);
}

/* ---------- Barre de filtres ---------- */
.filters-wrap{
  position: sticky;
  top: var(--sticky-offset);
  z-index: 10;
  margin-bottom: 18px;
  padding: 8px 0;
  background: rgba(255,255,255,.88); /* Fallback */
  border-bottom: 1px solid var(--border);
  -webkit-backdrop-filter: none;
  backdrop-filter: none;
}
[data-theme="dark"] .filters-wrap{
  background: rgba(15,23,42,.88);
}
@supports (backdrop-filter: blur(6px)) {
  .filters-wrap{
    backdrop-filter: saturate(140%) blur(6px);
  }
}
@supports (color: color-mix(in oklab, white, black)) {
  .filters-wrap{
    background: color-mix(in oklab, var(--bg) 88%, transparent);
  }
}

.filters{
  display:flex; gap:10px; align-items:center; flex-wrap:nowrap;
  overflow-x:auto; -webkit-overflow-scrolling: touch;
  padding-bottom: 6px;
  scrollbar-width: thin;
  scrollbar-color: var(--chip-border) transparent;
}
.filters::-webkit-scrollbar{ height:6px; }
.filters::-webkit-scrollbar-thumb{
  background: var(--chip-border);
  border-radius: 999px;
}

/* pill de filtre */
button.filter-pill{
  -webkit-appearance: none; appearance: none; border: none;
  display:inline-flex; align-items:center; justify-content:center; white-space:nowrap;
  padding:.46rem .9rem; line-height:1; cursor:pointer; user-select:none;
  border-radius:999px; font-weight:600; font-size:.92rem;
  background: var(--chip-bg); color: var(--text);
  border: 1px solid var(--chip-border);
  transition: background-color .2s, border-color .2s, color .2s, transform .15s, box-shadow .2s;
}
button.filter-pill:hover{
  background: var(--hover-bg);
  transform: translateY(-1px);
}
button.filter-pill:focus-visible{
  outline: 0;
  box-shadow: 0 0 0 3px rgba(124,108,246,.35); /* Fallback */
}
@supports (color: color-mix(in oklab, white, black)) {
  button.filter-pill:focus-visible{
    box-shadow: 0 0 0 3px color-mix(in oklab, var(--accent) 35%, transparent);
  }
}

/* état actif : assure contraste suffisant */
button.filter-pill.active{
  background: var(--accent);
  /* Choix de la couleur de texte en fonction du thème pour garder le contraste > 4.5:1 */
  color: #0b0b0b;
  border-color: var(--accent);
  box-shadow: 0 6px 14px rgba(124,108,246,.25);
}
[data-theme="dark"] button.filter-pill.active{
  color: #0b0b0b; /* sur accent clair, texte sombre reste lisible */
}

/* ---------- Cartes projet ---------- */
.project-card{
  position: relative;
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius:16px;
  overflow:hidden;
  box-shadow: var(--shadow);
  transition: transform .25s ease, box-shadow .25s ease, border-color .25s ease;
}
.project-card:hover{
  transform: translateY(-6px);
  box-shadow: 0 14px 30px rgba(0,0,0,.12);
  border-color: rgba(124,108,246,.28);
}
/* Halo legacy off */
.project-card::after{ content:none !important; }

.project-card .card-body{ background: var(--surface); color: var(--text); }
.project-card .card-title{ color: var(--text); font-weight: 800; }
.project-card .card-text{ color: var(--text); opacity: .9; }

/* Focus visible sur les éléments interactifs de la carte */
#projects a.btn:focus-visible,
.project-card:focus-within{
  outline: 3px solid rgba(124,108,246,.45);
  outline-offset: 2px;
}

/* Médias */
.project-media{ position: relative; overflow: hidden; }
.project-image{
  display:block; width:100%;
  aspect-ratio: 16 / 9;
  object-fit: cover;
  border-bottom: 2px solid var(--accent);
  transition: transform .5s ease;
}
.project-card:hover .project-image{ transform: scale(1.03); }

/* Placeholder neutre */
.placeholder-gradient{
  width:100%; aspect-ratio: 16/9;
  background: var(--surface);
  border-bottom: 2px solid var(--accent);
}

/* Facts (métriques) */
.facts{ display:flex; flex-wrap:wrap; gap:6px; margin:.5rem 0 0; padding:0; }
.facts .fact{
  list-style:none;
  font-size:.78rem; padding:.18rem .6rem; border-radius:999px;
  background: var(--chip-bg); border: 1px solid var(--chip-border); color: var(--text);
}

/* tags */
.tags{ display:flex; flex-wrap:wrap; gap:6px; }
.tag{
  display:inline-block; font-size:.78rem; padding:.18rem .6rem;
  border-radius:999px;
  background: var(--chip-bg);
  border: 1px solid var(--chip-border);
  color: var(--text);
}

/* boutons */
#projects .btn{ border-radius:999px; padding:.55rem 1.1rem; font-weight:700; }
#projects .btn-outline{
  background: transparent;
  border: 1px solid var(--chip-border);
  color: var(--text);
  transition: background-color .2s, border-color .2s, transform .15s;
}
#projects .btn-outline:hover{
  background: var(--hover-bg);
  border-color: var(--accent);
  transform: translateY(-1px);
}

/* ---------- Accessibilité préférences ---------- */
@media (prefers-reduced-motion: reduce){
  *{ animation-duration:.001ms !important; animation-iteration-count:1 !important; transition:none !important; }
  .project-card:hover{ transform:none; box-shadow: var(--shadow); }
  .project-card:hover .project-image{ transform:none; }
}
@media (prefers-reduced-transparency: reduce){
  .filters-wrap{ backdrop-filter:none !important; }
}

/* ---------- Ajustements responsive ---------- */
@media (max-width: 575.98px){
  #projects{ padding: 44px 0; }
  .filters{ gap:8px; }
}
